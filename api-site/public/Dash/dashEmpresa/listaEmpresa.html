<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lista de Empresas</title>

    <link rel="icon" href="../../IMG/Eagle Totens logo aguia sem fundo branco amarelo.png">
    <!-- Google Font: Nunito -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <!-- <link rel="stylesheet" href="../dist/css/adminlte.min.css"> -->
    <!-- DataTables -->
    <!-- Theme style -->
    <link rel="stylesheet" href="../dist/css/adminlte.min.css">
    <link rel="stylesheet" href="../dashGerente/css/todosColaboradores.css">

    <link rel="stylesheet" href="../dashGerente/css/indexGerente.css">
    <link rel="stylesheet" href="../dashSuporte/CSS/visaogeral.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />

    <!-- 
    <link rel="stylesheet" href="../dashSuporte/CSS/stylecadastrototem_ET.css">
 -->

</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <div class="preloader flex-column justify-content-center align-items-center">
            <img class="animation__wobble" src="../../IMG/Eagle Totens logo aguia sem fundo branco amarelo.png" alt="" width="400">
        </div>
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="./index_suport.html" class="nav-link">Home</a>
                </li>
            </ul>
        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside style="background-color: #1C1C1C;" class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="../index.html" class="brand-link">
                <img src="../../IMG/Eagle Totens logo aguia sem fundo branco amarelo.png" alt=" Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
                <span class="brand-text font-weight-light">Eagle Totens</span>

            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="info">
                        <h5 style="color:white;">Olá, <span style="color: fff;" id="b_usuario">usuário</span>!
                        </h5>
                    </div>
                </div>

                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                        <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->

                        <li class="nav-item">
                            <a href="../widgets.html" class="nav-link">
                                <i class="fas fa-user-plus"></i>
                                <p>
                                    Empresa
                                    <i class="fas fa-angle-left right"></i>

                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="../dashEmpresa/listaEmpresa.html" class="nav-link">
                                        <i class="nav-icon far fa-circle "></i>
                                        <p> Todas as empresas</p>

                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="../dashEmpresa/cadastroEmpresa.html" class="nav-link">
                                        <i class="nav-icon far fa-circle "></i>
                                        <p>Cadastrar empresa</p>
                                    </a>
                                </li>
                            </ul>
                            <a href="../widgets.html" class="nav-link">
                                <i class="fas fa-user-plus"></i>
                                <p>
                                    Colaborador
                                    <i class="fas fa-angle-left right"></i>

                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="../dashGerente/listaColaboradores.html" class="nav-link">
                                        <i class="nav-icon far fa-circle "></i>
                                        <p> Todos os colaboradores</p>

                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="../dashGerente/cadastroColaborador.html" class="nav-link">
                                        <i class="nav-icon far fa-circle "></i>
                                        <p>Cadastrar colaborador</p>
                                    </a>
                                </li>
                            </ul>

                            <a href="../widgets.html" class="nav-link">
                                <i class="fas fa-user-plus"></i>
                                <p>
                                    Totem
                                    <i class="fas fa-angle-left right"></i>

                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="../dashSuporte/visaoGeralTotens.html" class="nav-link">
                                        <i class="nav-icon far fa-circle "></i>
                                        <p> Todos os totens</p>

                                        </p>
                                    </a>
                                    <ul class="nav nav-treeview">
                                        <li class="nav-item">
                                            <a href="../dashEmpresa/listaEmpresa.html" class="nav-link">
                                                <i class="nav-icon far fa-circle "></i>
                                                <p> Todas as empresas</p>

                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="../dashEmpresa/cadastroEmpresa.html" class="nav-link">
                                                <i class="nav-icon far fa-circle "></i>
                                                <p>Cadastrar empresa</p>
                                            </a>
                                        </li>
                                    </ul>
                                    <a href="../widgets.html" class="nav-link">
                                        <i class="fas fa-user-plus"></i>
                                        <p>
                                            Colaborador
                                            <i class="fas fa-angle-left right"></i>

                                        </p>
                                    </a>
                                    <ul class="nav nav-treeview">
                                        <li class="nav-item">
                                            <a href="../dashGerente/listaColaboradores.html" class="nav-link">
                                                <i class="nav-icon far fa-circle "></i>
                                                <p> Todos os colaboradores</p>

                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="../dashGerente/cadastroColaborador.html" class="nav-link">
                                                <i class="nav-icon far fa-circle "></i>
                                                <p>Cadastrar colaborador</p>
                                            </a>
                                        </li>
                                    </ul>

                                    <a href="../widgets.html" class="nav-link">
                                        <i class="fas fa-user-plus"></i>
                                        <p>
                                            Totem
                                            <i class="fas fa-angle-left right"></i>

                                        </p>
                                    </a>
                                    <ul class="nav nav-treeview">
                                        <li class="nav-item">
                                            <a href="../dashSuporte/visaoGeralTotens.html" class="nav-link">
                                                <i class="nav-icon far fa-circle "></i>
                                                <p> Todos os totens</p>

                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="../dashSuporte/cadastrarTotem.html" class="nav-link">
                                                <i class="nav-icon far fa-circle "></i>
                                                <p>Cadastrar totem</p>
                                            </a>
                                        </li>
                                    </ul>

                                    <li class="nav-item">
                                        <a href="../dashSuporte/cadastrarTotem.html" class="nav-link">
                                            <i class="nav-icon far fa-circle "></i>
                                            <p>Cadastrar totem</p>
                                        </a>
                                    </li>

                            </ul>

                            <li class="nav-item">
                                <a href="../../index.html" class="nav-link">
                                    <i class="nav-icon far fa-circle "></i>
                                    <p>Sair</p>
                                </a>
                            </li>

                    </ul>



                </nav>

                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">

                    <!-- /.row -->
                </div>
                <!-- /.container-fluid -->
            </div>
            <!-- /.content-header -->

            <!-- Main content -->
            <style>
                .modal-content {
                    background-color: #3a3a3a !important;
                }
                
                label {
                    color: #ffe611 !important;
                }
                
                .form-control {
                    border-radius: 1rem !important;
                    background-color: #bcbcbc !important;
                }
                
                .form-control:focus {
                    border-color: #f1ff80 !important;
                    box-shadow: 0px 0px 20px -0.2rem rgb(238, 255, 0) !important;
                }
                
                .btn-default {
                    border-radius: 1rem !important;
                }
                
                .btn-default:focus {
                    box-shadow: 0px 0px 20px -0.2rem rgb(238, 255, 0) !important;
                    background-color: #5a5a5a !important;
                }
                
                .btn-save {
                    background-color: #ffe602 !important;
                    /* color: aliceblue !important; */
                }
                
                .modal-header .close {
                    margin: 0 !important;
                    padding: 0 1rem;
                }
            </style>
            <div class="box-body">
                <table id="tbEmpresa" class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <!-- <th></th> -->
                            <th>Razão Social</th>
                            <th>CNPJ</th>
                            <th>Telefone</th>
                            <th>Lougradouro</th>
                            <th>N°</th>
                            <th>UF</th>
                            <th>Cidade</th>
                            <th>Actios</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr></tr>

                        <!-- <tr>
                            <td>Brenda</td>
                            <td>11949940145</td>
                            <td>Gerente</td>
                            <td>Brendarobertars48@gmail.com</td>
                            <td>*****</td>
                            <td>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#edit-modal">
                                        <i class="fa fa-edit"></I>
                                    </button>
                                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#delete-modal">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr> -->

                    </tbody>
                </table>
            </div>

            <div class="modal fade" id="edit-modal" onload="preecherCamposForm()">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h4 style="color:#ffe602 ;" class="header" align="center"><b>Edit User</b></h4>
                        </div>
                        <div class="modal-body">
                            <div>
                                <input type="hidden" name="_token" value="<?php echo csrf_token(); ?>">
                                <div class="box-body">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Razao</label> ]
                                        <input onkeypress="validRazao()" id="input_razaoModal" type="text" class="form-control" name="username" placeholder="User name">
                                        <div id="div_msg"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">CNPJ</label>
                                        <input onkeyup="validCnpj()" id="cnpjModal" type="text" class="form-control" name="telefone" placeholder="Enter telefone">
                                        <div id="div_msg1"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Telefone</label>
                                        <input onkeyup="validTel()" id="telModal" type="text" class="form-control" name="cargo" placeholder="Enter cargo">
                                        <div id="div_msg2"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Lougradouro</label>
                                        <input onkeyup="validLogradoro()" id="input_LougradouroModal" type="text" class="form-control" name="email" placeholder="Enter email">
                                        <div id="div_msg3"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Numero</label>
                                        <input onkeyup="validNumero()" id="input_numeroModal" type="text" class="form-control" name="change_password" placeholder="Enter password">
                                        <div id="div_msg4"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">UF</label>
                                        <input id="input_ufModal" type="text" class="form-control" name="change_password" placeholder="Enter password">
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Cidade</label>
                                        <input id="input_cidadeModal" type="text" class="form-control" name="change_password" placeholder="Enter password">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                                    <button onclick="atualizar()" class="btn btn-default btn-save">Save
                                        changes</button>
                                    <span id="id_empresaModal" style="display: none;"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>




            <!-- right col -->
        </div>
        <!-- /.content-wrapper -->
        <footer class="main-footer">
            <div class="float-right d-none d-sm-block">

            </div>
            <strong>Copyright &copy;2022 <a href="../index.html">Eagle Totens</a>.</strong>
        </footer>
        n
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->

    <!-- jQuery -->
    <script src="../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables  & Plugins -->
    <!-- AdminLTE App -->
    <script src="../dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../dist/js/demo.js"></script>
    <!-- Page specific script -->
    <script src="../plugins/inputmask/jquery.inputmask.min.js"></script>

</body>

</html>
<script>
    //  ----------- mascara cnpj -----------------------
    const cnpjMasc = document.getElementById('cnpjModal')
    cnpjMasc.addEventListener('keypress', (e) => mascaraCnpj(e.target.value))
    cnpjMasc.addEventListener('change', (e) => mascaraCnpj(e.target.value))

    const mascaraCnpj = (valorCnpj) => {
            // valreplace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, "$1.$2.$3/$4-$5")
            valorCnpj = valorCnpj.replace(/\D/g, "")
            valorCnpj = valorCnpj.replace(/(\d{2})(\d)/, "$1.$2")
            valorCnpj = valorCnpj.replace(/(\d{3})(\d)/, "$1.$2")
            valorCnpj = valorCnpj.replace(/(\d{3})(\d)/, "$1/$2")
            valorCnpj = valorCnpj.replace(/(\d{4})(\d)/, "$1-$2")
            cnpjMasc.value = valorCnpj
        }
        //  ----------- mascara telefone -----------------------
        // const telModal = document.getElementById('telModal') // Seletor do campo de telefone

    // telModal.addEventListener('keypress', (e) => mascaraTel(e.target.value)) // Dispara quando digitado no campo
    // telModal.addEventListener('change', (e) => mascaraTel(e.target.value)) // Dispara quando autocompletado o campo

    // const mascaraTel = (valor) => {
    //     valor = valor.replace(/\D/g, "")
    //     valor = valor.replace(/^(\d{2})(\d)/g, "($1) $2")
    //     valor = valor.replace(/(\d)(\d{4})$/, "$1-$2")
    //     telModal.value = valor // Insere o(s) valor(es) no campo
    // }

    b_usuario.innerHTML = localStorage.USUARIO_NOME;

    buscar() //funcionando no local

    var fkEmpresa;
    //atualizar();
    //desativar();  
    function buscar() {
        console.log();
        //inicio fetch
        fetch("/empresa/listar", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        }).then(function(resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                resposta.json().then(json => {

                    console.log(json);
                    console.log(JSON.stringify(json));
                    var listaRazao = [];
                    var listaCnpj = [];
                    var listaTelefone = [];
                    var listaLogradouro = [];
                    var listaNumero = [];
                    var listaUf = [];
                    var listaCidade = [];
                    var listaId = [];
                    console.log(json.length);
                    for (var i = 0; i < json.length; i++) {
                        listaRazao.push(json[i].razao_social);
                        listaCnpj.push(json[i].cnpj);
                        listaTelefone.push(json[i].telefone);
                        listaLogradouro.push(json[i].logradouro);
                        listaNumero.push(json[i].numero);
                        listaUf.push(json[i].uf);
                        listaCidade.push(json[i].cidade);
                        listaId.push(json[i].id_empresa);
                    }
                    for (var i = 0; i < json.length; i++) {
                        cadEmpresa(
                            listaRazao[i],
                            listaCnpj[i],
                            listaTelefone[i],
                            listaLogradouro[i],
                            listaNumero[i],
                            listaUf[i],
                            listaCidade[i],
                            listaId[i],
                            i

                        );
                    }

                });

            } else {
                // throw ("Erro ao puxar lista");
            }
        }).catch(function(resposta) {
            console.log(`#ERRO: ${resposta}`);
            //finalizarAguardar();
        });
        //fim fetch
    }

    function atualizar() {
        //nome,nivel_acesso,funcao,telefone,email,senha,fkEmpresa
        var razao_socialVar = input_razaoModal.value;
        var cnpjVar = cnpjModal.value;
        var telefoneVar = telModal.value;
        var logradouroVar = input_LougradouroModal.value;
        var numeroVar = input_numeroModal.value;
        var ufVar = input_ufModal.value;
        var cidadeVar = input_cidadeModal.value;
        var id_empresaVar = id_empresaModal.innerHTML;

        fetch("/empresa/atualizarEmpresa", {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                razao_social: razao_socialVar,
                cnpj: cnpjVar,
                telefone: telefoneVar,
                id_empresa: id_empresaVar,
            })
        }).then(function(resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                atualizarEndereco(logradouroVar, numeroVar, ufVar, cidadeVar, id_empresaVar)
            } else {
                // throw ("Houve um erro ao tentar realizar atualizar colaborador!");
            }
        }).catch(function(resposta) {
            console.log(`#ERRO: ${resposta}`);
            //finalizarAguardar();  
        });

    }

    function atualizarEndereco(logradouro, numero, uf, cidade, id_empresa) {
        //nome,nivel_acesso,funcao,telefone,email,senha,fkEmpresa
        var logradouroVar = logradouro;
        var numeroVar = numero;
        var ufVar = uf;
        var cidadeVar = cidade;

        fetch("/empresa/atualizarEndereco", {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                logradouro: logradouroVar,
                numero: numeroVar,
                uf: ufVar,
                cidade: cidadeVar,
                id_empresa: id_empresa
            })
        }).then(function(resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                window.location.reload();
            } else {
                // throw ("Houve um erro ao tentar realizar atualizar colaborador!");
            }
        }).catch(function(resposta) {
            console.log(`#ERRO: ${resposta}`);
            //finalizarAguardar();  
        });

    }


    function desativar(id_empresa) {
        var statusVar = "inativo";
        var id_empresaVar = id_empresa;
        fetch("/empresa/desativar", {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                status: statusVar,
                id_empresa: id_empresaVar
            })
        }).then(function(resposta) {

            if (confirm('Deseja mesmo remover empresa?')) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    window.location.reload();
                    //                finalizarAguardar();
                } else {
                    // throw ("Houve um erro ao tentar realizar desativar empresa!");
                }
            }
        }).catch(function(resposta) {
            console.log(`#ERRO: ${resposta}`);
            //finalizarAguardar();
        });

    }


    $(document).ready(function() {
        /**
         * for showing edit item popup
         */

        $(document).on('click', "#edit-item", function() {
            $(this).addClass('edit-item-trigger-clicked'); //useful for identifying which trigger was clicked and consequently grab data from the correct row and not the wrong one.

            var options = {
                'backdrop': 'static'
            };
            $('#edit-modal').modal(options)
        })

        // on modal show
        $('#edit-modal').on('show.bs.modal', function() {
            var el = $(".edit-item-trigger-clicked"); // See how its usefull right here? 
            var row = el.closest(".data-row");

            // get the data
            var id = el.data('item-id');
            var name = row.children(".name").text();
            var description = row.children(".description").text();

            // fill the data in the input fields
            $("#modal-input-id").val(id);
            $("#modal-input-name").val(name);
            $("#modal-input-description").val(description);

        })

        // on modal hide
        $('#edit-modal').on('hide.bs.modal', function() {
            $('.edit-item-trigger-clicked').removeClass('edit-item-trigger-clicked')
            $("#edit-form").trigger("reset");
        })
    })

    var colab, index;

    function cadEmpresa(razao, cnpj, telefone, logradouro, numero, uf, cidade, id_empresa, contador) {
        colab = document.getElementById("tbEmpresa");
        var qntlinhas = colab.rows.length
        var linha = colab.insertRow(qntlinhas);

        var cellRazao = linha.insertCell(0);
        var cellCnpj = linha.insertCell(1);
        var cellTelefone = linha.insertCell(2);
        var cellLogradouro = linha.insertCell(3);
        var cellNumero = linha.insertCell(4);
        var cellUf = linha.insertCell(5);
        var cellCidade = linha.insertCell(6);
        var callAcao = linha.insertCell(7);
        var cellId = linha.insertCell(8);

        cellRazao.innerHTML = razao;
        cellCnpj.innerHTML = cnpj;
        cellTelefone.innerHTML = telefone;
        cellLogradouro.innerHTML = logradouro;
        cellNumero.innerHTML = numero;
        cellUf.innerHTML = uf;
        cellCidade.innerHTML = cidade;
        //callAcao.classList.add('btn-group');
        cellId.style = 'display: none';
        cellId.setAttribute('id', id_empresa);
        cellId.innerHTML = id_empresa;
        var div = document.createElement('div');
        div.classList.add('btn-group');
        callAcao.appendChild(div);


        var bt1 = document.createElement('button');
        div.appendChild(bt1);
        bt1.classList.add('btn-info');
        bt1.classList.add('btn');
        bt1.setAttribute('id', `btEdit${contador}`);
        bt1.setAttribute("onclick", `preencherCamposForm(${id_empresa})`)

        var imgEdit = document.createElement('i');
        bt1.appendChild(imgEdit);
        imgEdit.classList.add('fa-edit');
        imgEdit.classList.add('fa');

        var editar = document.getElementById(`btEdit${contador}`);
        editar.dataset.toggle = "modal";
        editar.dataset.target = "#edit-modal"

        var bt2 = document.createElement('button');
        callAcao.appendChild(div);
        div.appendChild(bt2);
        bt2.classList.add('btn-info');
        bt2.classList.add('btn');
        bt2.setAttribute('id', `btDel${contador}`);
        bt2.setAttribute("onclick", `desativar(${id_empresa})`);

        var imgDel = document.createElement('i');
        bt2.appendChild(imgDel);
        imgDel.classList.add('fa-trash');
        imgDel.classList.add('fa');

        var delet = document.getElementById(`btDel${contador}`);
        delet.dataset.toggle = "modal";
        delet.dataset.target = "#delet-modal"





        //limpar();
    }


    function preencherCamposForm(id_empresa) {
        var fkEmpresaVar = sessionStorage.FK_EMPRESA
        fetch("/empresa/listar", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        }).then(function(resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                resposta.json().then(json => {

                    console.log(json);
                    console.log(JSON.stringify(json));

                    var razao;
                    var cnpj;
                    var telefone;
                    var logradouro;
                    var numero;
                    var uf;
                    var cidade;
                    console.log(json.length);
                    for (var i = 0; i < json.length; i++) {
                        if (json[i].id_empresa == id_empresa) {
                            razao = json[i].razao_social;
                            cnpj = json[i].cnpj;
                            telefone = json[i].telefone;
                            logradouro = json[i].logradouro;
                            numero = json[i].numero;
                            uf = json[i].uf;
                            cidade = json[i].cidade;
                        }
                    }
                    console.log(id_empresa)
                    document.getElementById("input_razaoModal").value = razao;
                    document.getElementById("cnpjModal").value = cnpj;
                    document.getElementById("telModal").value = telefone;
                    document.getElementById("input_LougradouroModal").value = logradouro;
                    document.getElementById("input_ufModal").value = uf;
                    document.getElementById("input_cidadeModal").value = cidade;
                    document.getElementById("input_numeroModal").value = numero;
                    document.getElementById("id_empresaModal").innerHTML = id_empresa;
                });

            } else {
                // throw ("Erro ao puxar lista");
            }
        }).catch(function(resposta) {
            console.log(`#ERRO: ${resposta}`);
            //finalizarAguardar();
        });



    }
    /* function delColab(id) {

        if (confirm('Deseja mesmo remover empresa?')) {
            empresa = document.getElementById("tbEmpresa");
            var qntlinhas = empresa.rows.length;
            var linhaExcluida = id;
            linhaExcluida = deleteRow(qntlinhas);

        }


    }
 */
</script>
<script>
    function validRazao() {
        var razao = input_razaoModal.value;
        if (razao.length >= 3) {
            div_msg.innerHTML = '';
        } else {
            div_msg.innerHTML = '<span style="color: red;font-size:12px;">Caracteres insuficientes!</span>';
            razao_social_input.style.borderColor = 'red';
        }
    }



    function validCnpj() {
        var cnpj = cnpjModal.value;

        if (cnpj.length >= 18) {
            div_msg1.innerHTML = '';
            cnpjModal.style.borderColor = '#f1ff80'
        } else {
            div_msg1.innerHTML = `<span style="color: red;font-size:12px;">
            CNPJ invalido!.</span>`
            cnpjModal.style.borderColor = 'red';
        }
    }

    function validTel() {
        var numero = telModal.value;

        if (numero.length > 10) {
            div_msg2.innerHTML = '';
            telModal.style.borderColor = '#f1ff80'
        } else {
            div_msg2.innerHTML = `<span style="color: red;font-size:12px;">
          </span>`;
            telModal.style.borderColor = 'red';
        }
    }

    function validLogradoro() {
        var logradouro = input_LougradouroModal.value;

        if (logradouro.length >= 3) {
            div_msg3.innerHTML = '';
            input_LougradouroModal.style.borderColor = '#f1ff80'

        } else {
            div_msg3.innerHTML = `<span style="color: red;font-size:12px;">
            Endereço invalido.</span>`;
            input_LougradouroModal.style.borderColor = 'red';
        }
    }

    function validNumero() {
        var numero = input_numeroModal.value;
        if (numero.length != '') {
            div_msg4.innerHTML = '';
            input_numeroModal.style.borderColor = '#f1ff80'
        } else {
            div_msg4.innerHTML = `<span style="color: red;font-size:12px;">
            Endereço invalido.</span>`;
            input_numeroModal.style.borderColor = 'red';
        }
    }
</script>